<app-navigation *ngIf="auth.hasValidAccessToken()"></app-navigation>
<nav *ngIf="!auth.hasValidAccessToken()" class="navbar navbar-expand-md navbar-dark bg-primary fixed-top">
  <a class="navbar-brand" href="#">Human Cell Atlas</a>
</nav>

<main class="container-fluid">
  <br/>
  <alert></alert>
  <router-outlet>
    <div  *ngIf="showLoader" class="loading">
      <mat-spinner
        class="example-margin"
        [color]="primary"
        [mode]="indeterminate"
        [value]="50">
      </mat-spinner>
    </div>
  </router-outlet>
</main>





<!--TODO: REMOVE this after testing-->
<div>
  <button
    class="btn btn-success btn-margin" (click)="auth.login()">
    Login
  </button>
  |
  <button
    class="btn btn-success btn-margin" (click)="auth.refreshToken()">
    Refresh Token
  </button>
  |
  <button
    class="btn btn-success btn-margin" (click)="auth.revokeToken().subscribe({})">
    Revoke Token
  </button>
  |
  <button
    class="btn btn-success btn-margin" (click)="auth.clearBrowser()">
    Logout
  </button>
  <div>
    access token:
    <code>
      {{this.auth.oauthService.getAccessToken()}}
    </code>
  </div>
  <div>
    refresh token:
    <code>
      {{this.auth.oauthService.getRefreshToken()}}
    </code>
  </div>
</div>
